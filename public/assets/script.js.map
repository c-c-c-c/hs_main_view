{"version":3,"sources":["../../src/script/script.js"],"names":["WIDTH","HEIGHT","c_radian","r_radian","light","ambient","hsGeoGruoup","THREE","Group","colorConf","renderer","WebGLRenderer","preserveDrawingBuffer","setSize","setClearColor","autoClearColor","document","body","appendChild","domElement","scene","Scene","camera","PerspectiveCamera","DirectionalLight","position","set","add","AmbientLight","scene_bg","camera_bg","OrthographicCamera","loader","JSONLoader","modelPath","model_hs","model_pn","mesh","plane","termsTree","term1","ledNo","oftenBunbo","oftenBunshi","ledColor","term2","term3","term4","term5","load","geo","mat","geometry","material","scale_hs","BasicMat","MeshBasicMaterial","PhongMat","MeshPhongMaterial","color","Color","wireframe","Mesh","scale","opacity","transparent","p_geometry","PlaneGeometry","i","p_material","side","DoubleSide","rotation","x","Math","PI","z","y","bg_geometry","bg_material","bg","maxpoints","main","count","render_count","lookAt","key","tmpTerm","render","requestAnimationFrame","$","click","each","index","element","term_id","attr","Number","val","console","log"],"mappings":"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","file":"script.js","sourcesContent":["\nvar WIDTH = 500;\nvar HEIGHT = 500;\nlet c_radian = 0;\nlet r_radian = 0;\nlet light;\nlet ambient;\nvar hsGeoGruoup = new THREE.Group();;\n\nconst colorConf = {\n\t'red': '#ff0000',\n\t'yellow': '#f0f000',\n\t'green': '#00e000',\n\t'skyblue': '#00ffff',\n\t'blue': '#0000ff',\n\t'black': '#000000',\n\t'dark' : '#335500',\n\t'white': '#ffffff',\n\t'pink' : '#ff99ff'\n};\n\n// レンダラー\nlet renderer = new THREE.WebGLRenderer({\n  preserveDrawingBuffer:true\n});\nrenderer.setSize( WIDTH, HEIGHT );\nrenderer.setClearColor(0xffffff);\nrenderer.autoClearColor = false;\ndocument.body.appendChild(renderer.domElement);\n\n// メイン描画用のシーンとカメラ\nvar scene = new THREE.Scene();\nvar camera = new THREE.PerspectiveCamera( 70, WIDTH / HEIGHT, 1, 100 );\n\n//light\nlight = new THREE.DirectionalLight(0xffffff, 1);\nlight.position.set(0, 200, 80);\nscene.add(light);\nambient = new THREE.AmbientLight(0x404040);\nscene.add(ambient);\n\n//背景の定義\nvar scene_bg = new THREE.Scene();\nvar camera_bg = new THREE.OrthographicCamera(0, WIDTH, HEIGHT, 0, 0, 1000);\n// メイン描画オブジェクト、とりあえずBox\n\nlet loader = new THREE.JSONLoader();　　\nlet modelPath = '../src/data/hs300k.json'\n// modelPath = \"https://s3-us-west-2.amazonaws.com/s.cdpn.io/1538236/hs300k.json\";\nlet model_hs;\nlet model_pn;\nvar mesh;\nvar plane = {};\n\n//色の\nlet termsTree = {\n\tterm1 : {\n\t\tledNo : 1,\n\t\toftenBunbo : 1,\n\t\toftenBunshi: 1,\n\t\tledColor : 'red'\n\t},\n\tterm2 : {\n\t\tledNo : 2,\n\t\toftenBunbo : 1,\n\t\toftenBunshi: 1,\n\t\tledColor : 'blue'\n\t},\n\tterm3 : {\n\t\tledNo : 3,\n\t\toftenBunbo : 2,\n\t\toftenBunshi: 1,\n\t\tledColor : 'red'\n\t},\n\tterm4 : {\n\t\tledNo : 4,\n\t\toftenBunbo : 1,\n\t\toftenBunshi: 1,\n\t\tledColor : 'blue'\n\t},\n\tterm5 : {\n\t\tledNo : 5,\n\t\toftenBunbo : 6,\n\t\toftenBunshi: 3,\n\t\tledColor : 'green'\n\t}\n}\n\nloader.load(modelPath, (geo, mat) => {\n\tlet geometry = geo;\n\tlet material = mat;\n\tlet scale_hs = 1;\n  //let BasicMat = new THREE.MeshBasicMaterial(mat);\n  let BasicMat = new THREE.MeshBasicMaterial(mat);\n  let PhongMat = new THREE.MeshPhongMaterial(mat);\n  BasicMat.color = new THREE.Color(\"#ffffff\");\n  BasicMat.wireframe = true;\n\n  model_hs = new THREE.Mesh(geo, BasicMat);\n  model_pn = new THREE.Mesh(geo, PhongMat);\n\n\tmodel_hs.scale.set(scale_hs, scale_hs, scale_hs);\n\tmodel_pn.scale.set(scale_hs*1.05, scale_hs*1.05, scale_hs*1.05);\n\tmodel_pn.material.color = new THREE.Color(\"#cccccc\");\n\tmodel_hs.material.opacity =0.01;\n\tmodel_hs.material.transparent = true;\n\n\tlet p_geometry = new THREE.PlaneGeometry( 0.16, 0.1);\n\t// p_geometry.rotation.y = (Math.PI) / 4  ;\n\n\n\n\t// ハンドスピナーとLEDライト５個をグループに\n\t// let hsGeoGruoup = new THREE.Group();\n\thsGeoGruoup.add(model_hs);\n\n\tfor (let i=1;i <= 5; i++) {\n\t\tlet p_material = new THREE.MeshBasicMaterial( { side: THREE.DoubleSide} );\n\t\tplane[i] = new THREE.Mesh( p_geometry, p_material );\n\t  plane[i].rotation.x = (Math.PI) / 2  ;\n\n\t\t//平面の位置を少しずつずらす。\n\t\tplane[i].position.z =0.14*i + 1.5;\n\t\t//画面に対する奥行き方向は変更なしで2\n\t\tplane[i].position.y =1.6;\n\n\t\tplane[i].material.color = new THREE.Color(colorConf['dark']);\n\n\t  // 先ほどのboxをグループに追加\n\t  hsGeoGruoup.add(plane[i]);\n\t  //hsGeoGruoup.add(model_pn);\n\t}\n\n\tscene.add( hsGeoGruoup );\n\n\n  var bg_geometry = new THREE.PlaneGeometry(WIDTH, HEIGHT, 10, 10);\n  var bg_material = new THREE.MeshBasicMaterial({\n    color: 0x000000,\n    transparent: true,\n    opacity: 0.01,\n  });\n\n\n  var bg = new THREE.Mesh(bg_geometry, bg_material);\n  bg.position.x = WIDTH/2;\n  bg.position.y = HEIGHT/2;\n  scene_bg.add(bg);\n\n\n\t//線の描画\n\tvar maxpoints = 30;\n\n  main();\n});\n\nlet count = 0;\nlet render_count = 0;\n\nfunction main() {\n\n\t//cameraの位置を設定\n\tcamera.position.set(0, 6, 0);\n\tcamera.lookAt({x:0, y:0, z:0 });\n\n  //hsGeoGruoup.rotation.y += 0.23 ;\n  // hsGeoGruoup.rotation.y += (2*Math.PI /30)*19.001 ;\n   hsGeoGruoup.rotation.y += (2*Math.PI /60)*41 ;\n\n\n\t// model_hs.position.y += (Math.sin(r_radian) - Math.sin(r_radian-0.01))*8;\n\t// model_pn.position.y += (Math.sin(r_radian) - Math.sin(r_radian-0.01))*8;\n\n\t// 色変え\n\n\t// 初期値\n\n\n\t//for (let termNo=1; termNo <=termnokazu; termNo++ ) {\n\tfor (let key in termsTree ) {\n\t\t// for (let ledNo=1; ledNo<=5; ledNo++) {\n\t\tlet tmpTerm = termsTree[key];\n\n\t\tif (count % tmpTerm['oftenBunbo'] < tmpTerm['oftenBunshi']) {\n\n\t\t\tplane[tmpTerm['ledNo']].material.color\n\t\t\t\t= new THREE.Color(colorConf[tmpTerm['ledColor']]);\n\t\t}else {\n\t\t\tplane[tmpTerm['ledNo']].material.color\n\t\t\t\t= new THREE.Color(colorConf['black']);\n\t\t}\n\t}\n\tcount ++;\n\n  renderer.render( scene_bg, camera_bg );\n  renderer.render( scene, camera );\n\n\tif (render_count < 60) {\n\t\trender_count++;\n\t\tmain();\n\t} else {\n\t\trequestAnimationFrame(main);\n\t}\n}\n\n\n\n\n$(function () {\n  $('#exe_btn').click(function() {\n    // 分母\n\t\t//初期化\n\t\tfor (let i=1 ; i <= 5; i++) {\n\t\t\tplane[i].material.color = new THREE.Color(colorConf['black']);\n\t\t}\n\n\t\ttermsTree={};\n\t\t$('.form_container').each(function(index, element){\n\t\t\tlet term_id = $(this).attr(\"id\");\n\t\t\ttermsTree[term_id] = {\n\t\t\t\t'ledNo'\n\t\t\t\t\t: Number($('#'+term_id+' .which_led').val()),\n\t\t\t\t'oftenBunbo'\n\t\t\t\t\t: Number($('#'+ term_id+' .how_often_bunbo').val()),\n\t\t\t\t'oftenBunshi'\n\t\t\t\t\t: Number($('#'+ term_id+' .how_often_bunshi').val()),\n\t\t\t\t'ledColor'\n\t\t\t\t\t: $('#'+ term_id+' .which_color').val()\n\t\t\t};\n\t\t});\n\n\t\tconsole.log(termsTree);\n\t\trender_count = 0;\n  })\n});\n"]}